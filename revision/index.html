<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpg" href="./favicon.ico"/>
    <link href="./output.css" rel="stylesheet">
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        @keyframes zoom-out {
            from {
                opacity: 1;
                transform: scale(1);
            }
        
            to {
                opacity: 0;
                transform: scale(0);
            }
        }

        #allQs div.delete {
            animation: zoom-out .3s cubic-bezier(.55,-0.04,.91,.94) forwards;
            transition: all 0.1s ease-out;
        }

        #allQs div.addNew {
            opacity: 0;
            animation: 
                zoom-in .3s cubic-bezier(0,.8,.32,1.07) forwards;
        }
        
        @keyframes openspace {
            to {
                height: auto;
            }
        }
        
        @keyframes zoom-in {
            from {
                opacity: 0;
                transform: scale(0);
            }
        
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
    <title>AL Revision Site</title>
    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <!-- UI - from http://lofiui.co -->
    <div class="flex w-screen h-screen text-gray-700 dark:text-gray-400 dark:bg-gray-900">
        <div class="flex flex-col w-56">
            <!-- Menu for navigation-->
            <div class="relative text-sm group font-indie-flower">
                <div class="flex items-center justify-between w-full h-16 px-4">
                    <span class="text-3xl">
                        Revision Site
                    </span>
                </div>
            </div>
            <!-- List of topics -->
            <div class="flex flex-col flex-grow p-4 overflow-auto font-indie-flower" id="topic-list">
                <a class="flex items-center flex-shrink-0 h-10 px-2 font-medium rounded dark:hover:bg-gray-800 hover:bg-gray-300 border-gray-300 dark:border-gray-800" id="revisionTips" href="#">
                    <span class="leading-none">Revision Tips</span>
                </a>
            </div>
        </div>
        <div class="flex flex-col flex-grow">
            <div class="flex justify-end items-center flex-shrink-0 h-16 px-8 font-indie-flower">
                <a class="flex items-center justify-end h-10 px-4 ml-2 text-sm font-medium rounded dark:hover:bg-gray-800 hover:bg-gray-300 dark:bg-gray-800 bg-gray-300" href="#">
                    Home
                </a>
                <a class="flex items-center justify-end h-10 px-4 ml-2 text-sm font-medium rounded dark:hover:bg-rose-900 hover:bg-rose-200" href="./paper1.html">
                    Paper 1
                </a>
                <a class="flex items-center justify-end h-10 px-4 ml-2 text-sm font-medium rounded dark:hover:bg-violet-900 hover:bg-violet-200" href="./paper2.html">
                    Paper 2
                </a>
                <a class="flex items-center justify-end h-10 px-4 ml-2 text-sm font-medium rounded dark:hover:bg-sky-900 hover:bg-sky-200" href="./paper3.html">
                    Paper 3
                </a>
            </div>
            <div class="flex-grow p-6 overflow-auto bg-gray-200 dark:bg-gray-800">
                <div class="h-full flex flex-row justify-evenly">
                    <!-- Content - questions go here -->
                    <div class="flex flex-col basis-3/4 allQs overflow-y-auto overflow-x-hidden" id="allQs">
                        <div class="bg-white dark:bg-gray-700 p-3 m-4">
                            Hopefully this will help with your revision.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<!-- Load questions from object called qs -->
<script src="home.js" ></script>
<script type="text/javascript">
    // Function to navigate with sidebar items
    let highlightTopic = function() {
        // If there is already a highlighted sidebar item, unhighlight it
        while(document.getElementById("topic-list").getElementsByClassName("dark:bg-gray-800").length !== 0) {
            document.getElementsByClassName("dark:bg-gray-800")[0].classList.remove("dark:bg-gray-800", "bg-gray-300", "border-r-4");
        };
        // Highlight this sidebar item
        this.classList.add("dark:bg-gray-800", "bg-gray-300", "border-r-4");
        // Find the main area on the page and empty it
        let mainDiv = document.getElementById("allQs");
        // Find the topic that was selected
        let currentId = String(this.id);
        // Find number of questions on this topic
        let numQs = qs[currentId].length;
        // Remove current Qs via transition
        for (let i = mainDiv.children.length-1; i > -1; i--) {
            mainDiv.children[i].classList.add("delete");
        };

        // Run this after animation - transitionend and animationend events don't seem to work...
        setTimeout(() => {
            // Delete all old questions
            while (document.getElementsByClassName("delete").length > 0) {
                document.getElementsByClassName("delete")[0].remove();
            };
            // Create new questions
            let emptyDiv = document.createElement("div");
            emptyDiv.classList.add("bg-white", "dark:bg-gray-700", "border", "border-gray-300", "dark:border-gray-800", "p-3", "m-4", "addNew");
            for (let i = 0; i < numQs; i++) {
                let newDiv = emptyDiv.cloneNode();
                newDiv.innerHTML = qs[currentId][i].question;
                mainDiv.appendChild(newDiv);
            };
            // Typeset LaTeX
            MathJax.typeset();
            // Remove transition class after animation finishes
            setTimeout(() => {
                while (document.getElementsByClassName("addNew").length > 0) {
                    document.getElementsByClassName("addNew")[0].classList.remove("addNew");
                };
            }, 300);
        }, 300);
    };
    
    // Function to add click listener to sidebar items so they do stuff when clicked
    let topicList = document.getElementById("topic-list").querySelectorAll("a");
    for (let i=0; i < topicList.length; i++) {
        topicList[i].onclick = highlightTopic;
    }
</script>
<script>
    // Timer function
    document.getElementById("timer").addEventListener("click", () => {
        let timer, minutes, seconds, startTimer;
        if (document.getElementById("timer").getAttribute("start") == "start") {
            timer = 1799;
            document.getElementById("timer").innerText = "30 : 00";
            document.getElementById("timer").setAttribute("start", "running");
            startTimer = setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                document.getElementById("timer").textContent = minutes + " : " + seconds;
                if (document.getElementById("timer").getAttribute("start") == "running") {
                    if (--timer == 0) {
                        document.getElementById("timer").textContent = "Time's up";
                        alert("Time's up");
                    };
                };
            }, 1000);
        }
        else if (document.getElementById("timer").getAttribute("start") == "running") {
            document.getElementById("timer").setAttribute("start", "paused");
        }
        else {
            document.getElementById("timer").setAttribute("start", "running");
        };
    });
</script>
</html>
